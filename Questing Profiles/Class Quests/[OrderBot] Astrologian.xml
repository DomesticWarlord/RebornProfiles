<?xml version="1.0" encoding="utf-8"?>
<!--
  Profile: [OrderBot] Astrologian Class Quests
  Authors: Sodimm, y2krazy
  Modified: DomesticWarlord86
-->
<Profile>
  <Name>[OrderBot] Astrologian Class Quests</Name>
  <BehaviorDirectory></BehaviorDirectory>
  <Order>
  
			<!-- Astrologian -->

			<LogMessage Message="[Class and Job Quests] Checking Astrologian job quests..." />

			<!-- Fortune Favors the Bole -->

			<If Condition="not IsQuestCompleted(67549)">
				<If Condition="Core.Player.ClassLevel &gt; 29">
					<If Condition="not HasQuest(67549)">
						<LisbethTravel ZoneId="153" XYZ="185.6259, 14.04428, 50.49207" />
						<If Condition="IsQuestAcceptQualified(67549)">
							<PickupQuest NpcId="1014981" QuestId="67549" XYZ="185.6259, 14.04428, 50.49207" />
						</If>
					</If>
					<If Condition="HasQuest(67549)">
						<If Condition="GetQuestStep(67549) == 1">
							<LisbethTravel ZoneId="153" XYZ="185.6259, 14.04428, 50.49207" />
							<LLExtendedDuty InteractNpcId="1014981" XYZ="185.6259, 14.04428, 50.49207" QuestId="67549" StepId="1">
								<HotSpots>
									<HotSpot XYZ="136.8006, 18.89513, 75.56405" Radius="90" /> <!-- The Balance -->
									<Hotspot XYZ="24.67467, 2.152851, 318.3112" Radius="90" /> <!-- Mace -->
								</HotSpots>
								<TargetMobs>
									<TargetMob Id="3857" Weight="7000" /> <!-- Bloodbelly Chanter -->
									<TargetMob Id="3856" Weight="6000" /> <!-- Bloodbelly Thaumaturge -->
									<TargetMob Id="3855" Weight="5000" /> <!-- Bloodbelly Sharpeye -->
									<TargetMob Id="3854" Weight="4000" /> <!-- Bloodbelly Stinger -->
									<TargetMob Id="3862" Weight="3000" /> <!-- Deepvoid Eye -->
									<TargetMob Id="3863" Weight="2000" /> <!-- Arcanima Marionette -->
									<TargetMob Id="4424" Weight="1000" /> <!-- Bandit Leader -->
								</TargetMobs>
							</LLExtendedDuty>
						</If>
						<If Condition="GetQuestStep(67549) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67549" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- Hanging in the Balance -->

			<If Condition="not IsQuestCompleted(67550)">
				<If Condition="Core.Player.ClassLevel &gt; 34">
					<If Condition="not HasQuest(67550)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67550)">
							 <PickupQuest NpcId="1012222" QuestId="67550" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67550)">
						<If Condition="GetQuestStep(67550) == 1">
							<LisbethTravel ZoneId="145" XYZ="143.3585, -6.089643, 409.8115" />
							<TalkTo NpcId="1014935" QuestId="67550" StepId="1" XYZ="143.3585, -6.089643, 409.8115" />
						</If>
						<If Condition="GetQuestStep(67550) == 2">
							<LisbethTravel ZoneId="145" XYZ="143.0532, -6.149414, 412.1003" />
							<UseObject NpcId="2006314" QuestId="67550" StepId="2" XYZ="143.0532, -6.149414, 412.1003" Radius="5" />
						</If>
						<If Condition="GetQuestStep(67550) == 3">
							<LisbethTravel ZoneId="146" XYZ="-61.72278, 23.15056, -408.713" />
							<TalkTo NpcId="1014941" QuestId="67550" StepId="3" XYZ="-61.72278, 23.15056, -408.713" />
						</If>
						<If Condition="GetQuestStep(67550) == 4">
							<LisbethTravel ZoneId="146" XYZ="-60.16632, 23.14789, -406.7903" />
							<UseObject NpcId="2006315" QuestId="67550" StepId="4" XYZ="-60.16632, 23.14789, -406.7903" Radius="5" />
						</If>
						<If Condition="GetQuestStep(67550) == 5">
							<LisbethTravel ZoneId="146" XYZ="-61.72278, 23.15056, -408.713" />
							<TalkTo NpcId="1014941" QuestId="67550" StepId="5" XYZ="-61.72278, 23.15056, -408.713" />
						</If>
						<If Condition="GetQuestStep(67550) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67550" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- A Lesson in Patience -->

			<If Condition="not IsQuestCompleted(67551)">
				<If Condition="Core.Player.ClassLevel &gt; 39">
					<If Condition="not HasQuest(67551)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67551)">
							 <PickupQuest NpcId="1012222" QuestId="67551" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67551)">
						<If Condition="GetQuestStep(67551) == 255">
							<LisbethTravel ZoneId="419" XYZ="199.9388, -0.899981, -48.72211" />
							<TurnIn QuestId="67551" NpcId="1014944" XYZ="199.9388, -0.899981, -48.72211" />
						</If>
					</If>
				</If>
			</If>

			<!-- Slings and Arrows -->

			<If Condition="not IsQuestCompleted(67552)">
				<If Condition="Core.Player.ClassLevel &gt; 39">
					<If Condition="not HasQuest(67552)">
						<LisbethTravel ZoneId="419" XYZ="199.9388, -0.899981, -48.72211" />
						<If Condition="IsQuestAcceptQualified(67552)">
							 <PickupQuest NpcId="1014944" QuestId="67552" XYZ="199.9388, -0.899981, -48.72211" />
						</If>
					</If>
					<If Condition="HasQuest(67552)">
						<If Condition="GetQuestStep(67552) == 1">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TalkTo NpcId="1012222" QuestId="67552" StepId="1" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
						<If Condition="GetQuestStep(67552) == 2">
							<LisbethTravel ZoneId="129" XYZ="-189.8986, 16, 58.18262" />
							<TalkTo NpcId="1014946" QuestId="67552" StepId="2" XYZ="-189.8986, 16, 58.18262" />
						</If>
						<If Condition="GetQuestStep(67552) == 3">
							<If Condition="not IsTodoChecked(67552,3,0)">
								<LisbethTravel ZoneId="129" XYZ="-187.8538, 3.999898, 170.1228" />
								<TalkTo NpcId="1014947" QuestId="67552" StepId="3" XYZ="-187.8538, 3.999898, 170.1228" />
							</If>
							<While Condition="not IsTodoChecked(67552,3,1)">
								<LisbethTravel ZoneId="128" XYZ="-3.03656, 48.168, -261.7075" />
								<TalkTo NpcId="1003282" QuestId="67552" StepId="3" XYZ="-3.03656, 48.168, -261.7075" />
								<TalkTo NpcId="1002680" QuestId="67552" StepId="3" XYZ="1.480042, 30.47563, -242.2065" />
							</While>
						</If>
						<If Condition="GetQuestStep(67552) == 4">
							<LisbethTravel ZoneId="128" XYZ="17.16638, 47.60001, -160.235" />
							<TalkTo NpcId="1014948" QuestId="67552" StepId="4" XYZ="17.16638, 47.60001, -160.235" />
						</If>
						<While Condition="GetQuestStep(67552) == 5">
							<LisbethTravel ZoneId="128" XYZ="17.7157, 47.5929, -160.4792" />
							<If condition="not DutyManager.InInstance">
								<RunCode name="DutyCommence"/>
							</If>
							<While condition="DutyManager.InInstance">
								<MoveTo XYZ="-40.36017,39.92936,64.92712" />
								<UseObject NpcId="2005851" XYZ="-40.36017,39.92936,64.92712" UseTimes="1"/>								
								<MoveTo XYZ="-11.08302,32.19616,-35.52757" />
								<WaitTimer WaitTime="3" />
								<UseObject NpcId="2006044" XYZ="-11.08302,32.19616,-35.52757" UseTimes="1"/>
								<MoveTo XYZ="15.78688,33.15784,34.24197" />
								<WaitTimer WaitTime="5" />
								<UseObject NpcId="2006045" XYZ="15.78688,33.15784,34.24197" UseTimes="1"/>
							</While>

							<!-- TO DO -->

							<!-- Ignore the first two Townspersons and only interact with the third. -->

							<!-- TO DO -->

							<LLExtendedDuty InteractNpcId="2006316" XYZ="17.7157, 47.5929, -160.4792" QuestId="67552" StepId="5">
								<HotSpots>
									<HotSpot XYZ="6.698669, 44.51124, -41.33673" Radius="10" /> <!-- Townsperson -->
									<HotSpot XYZ="-11.08302, 32.19616, -35.52757" Radius="90" /> <!-- Bound Astrologian -->
									<HotSpot XYZ="15.78688, 33.15784, 34.24197" Radius="90" /> <!-- August Astrologian -->
								</HotSpots>
								<TargetMobs>
									<TargetMob Id="3864" Weight="7000" /> <!-- Suspicious Astrologian -->
									<TargetMob Id="3866" Weight="6000" /> <!-- Serpent Reavest Fin -->
									<TargetMob Id="3868" Weight="5000" /> <!-- Serpent Reavest Claw -->
									<TargetMob Id="3869" Weight="4000" /> <!-- Serpent Reavest Tail -->
									<TargetMob Id="3867" Weight="3000" /> <!-- Serpent Reavest Fang -->
									<TargetMob Id="2095" Weight="2000" /> <!-- Amber Carbuncle -->
									<TargetMob Id="4425" Weight="1000" /> <!-- Pirate Captain -->
								</TargetMobs>
							</LLExtendedDuty>
						</While>
						<If Condition="GetQuestStep(67552) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67552" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- Ewer Right -->

			<If Condition="not IsQuestCompleted(67553)">
				<If Condition="Core.Player.ClassLevel &gt; 44">
					<If Condition="not HasQuest(67553)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67553)">
							<PickupQuest NpcId="1012222" QuestId="67553" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67553)">
						<If Condition="GetQuestStep(67553) == 1">
							<LisbethTravel ZoneId="155" XYZ="200.9766, 293.33, 420.3707" />
							<TalkTo NpcId="1006377" XYZ="200.9766, 293.33, 420.3707" QuestId="67553" StepId="1" />
						</If>
						<If Condition="GetQuestStep(67553) == 2">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<HandOver ItemIds="2001819" QuestId="67553" StepId="2" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
						<If Condition="GetQuestStep(67553) == 3">
							<LisbethTravel ZoneId="156" XYZ="-159.6552, 40.35031, -194.7204" />
							<SimpleDuty InteractNpcId="1014949" XYZ="-159.6552, 40.35031, -194.7204" QuestId="67553" StepId="3">
								<HotSpots>
									<HotSpot XYZ="-159.6552, 40.35031, -194.7204" Radius="90" />
								</HotSpots>
								<TargetMobs>
									<TargetMob Id="3863" Weight="3000" /> <!-- Arcanima Marionette -->
									<TargetMob Id="4247" Weight="2000" /> <!-- Rathefrost Bandit -->
									<TargetMob Id="4248" Weight="1000" /> <!-- Bandit Leader -->
								</TargetMobs>
							</SimpleDuty>
						</If>
						<If Condition="GetQuestStep(67553) == 4">
							<LisbethTravel ZoneId="156" XYZ="-147.2649, 43.32031, -186.6331" />
							<UseObject NpcId="2006318" QuestId="67553" StepId="4" XYZ="-147.2649, 43.32031, -186.6331" Radius="5" />
						</If>
						<If Condition="GetQuestStep(67553) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67553" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- Loved by the Sun -->

			<If Condition="not IsQuestCompleted(67554)">
				<If Condition="Core.Player.ClassLevel &gt; 49">
					<If Condition="not HasQuest(67554)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67554)">
							<PickupQuest NpcId="1012222" QuestId="67554" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67554)">
						<If Condition="GetQuestStep(67554) == 255">
							<LisbethTravel ZoneId="419" XYZ="199.9388, -0.899981, -48.72211" />
							<TurnIn QuestId="67554" NpcId="1014944" XYZ="199.9388, -0.899981, -48.72211" />
						</If>
					</If>
				</If>
			</If>

			<!-- Spearheading Initiatives -->

			<If Condition="not IsQuestCompleted(67555)">
				<If Condition="Core.Player.ClassLevel &gt; 49">
					<If Condition="not HasQuest(67555)">
						<LisbethTravel ZoneId="419" XYZ="199.9388, -0.899981, -48.72211" />
						<If Condition="IsQuestAcceptQualified(67555)">
							 <PickupQuest NpcId="1014944" QuestId="67555" XYZ="199.9388, -0.899981, -48.72211" />
						</If>
					</If>
					<If Condition="HasQuest(67555)">
						<If Condition="GetQuestStep(67555) == 1">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TalkTo NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" QuestId="67555" StepId="1" />
						</If>
						<If Condition="GetQuestStep(67555) == 2">
							<LisbethTravel ZoneId="155" XYZ="238.7885, 302, -277.9736" />
							<RunCode Name="Spearheading_Initiatives" />
							<StopBot />

							<!-- TO DO -->

							<!-- Navigate the solo Duty without attacking the patrol in the first phase. -->

							<!-- TO DO -->

							<LLExtendedDuty InteractNpcId="1014957" XYZ="238.7885, 302, -277.9736" QuestId="67555" StepId="2">
								<HotSpots>
									<HotSpot XYZ="264.1988, 302, -296.2078" Radius="10" /> <!-- Wait Spot #1 (130s) -->
									<HotSpot XYZ="299.0622, 310.2911, -428.7902" Radius="20" /> <!-- Mobs #1 -->
									<HotSpot XYZ="214.8132, 327.5648, -454.5586" Radius="20" /> <!-- Mobs #2 -->
									<HotSpot XYZ="264.1072, 325.0781, -470.0047" Radius="10" /> <!-- Wait Spot #2 (30s) -->
									<HotSpot XYZ="223.3805, 346.2138, -509.8866" Radius="20" /> <!-- Mobs #3 -->
									<HotSpot XYZ="277.0072, 350.0099, -529.1154" Radius="10" /> <!-- Wait Spot #3 (10s) -->
									<HotSpot XYZ="288.3823, 360.2582, -576.9807" Radius="20" /> <!-- Mobs #4 -->
									<HotSpot XYZ="267.7223, 359.409, -564.2863" Radius="20" /> <!-- Wait Spot #4 (25s) -->
									<HotSpot XYZ="267.9776, 362.4986, -605.0278" Radius="2" /> <!-- Zone Transition -->
									<HotSpot XYZ="265.4835, 359.1, -680.9374" Radius="90" /> <!-- Sealed Missive -->
								</HotSpots>
								<TargetMobs>
									<TargetMob Id="1849" Weight="7000" /> <!-- Downy Aevis -->
									<TargetMob Id="794" Weight="6000" /> <!-- Redhorn Ogre -->
									<TargetMob Id="4249" Weight="5000" /> <!-- False Temple Knight Chirurgeon -->
									<TargetMob Id="4250" Weight="4000" /> <!-- False Temple Knight Banneret -->
									<TargetMob Id="4421" Weight="3000" /> <!-- Familiar Temple Knight -->
									<TargetMob Id="4251" Weight="2000" /> <!-- False Temple Knight Heavy Infantry -->
									<TargetMob Id="4491" Weight="1000" /> <!-- Old World Thaumaturge -->
								</TargetMobs>
							</LLExtendedDuty>
						</If>
						<If Condition="GetQuestStep(67555) == 3">
							<LisbethTravel ZoneId="155" XYZ="262.8367, 359.1351, -688.3192" />
							<TalkTo NpcId="1014960" XYZ="262.8367, 359.1351, -688.3192" QuestId="67555" StepId="3" />
						</If>
						<If Condition="GetQuestStep(67555) == 4">
							<LisbethTravel ZoneId="155" XYZ="262.8367, 359.1351, -688.3192" />
							<HandOver ItemIds="2001879" QuestId="67555" StepId="4" NpcId="1014961" XYZ="259.7238, 359.0957, -689.9366" />
						</If>
						<If Condition="GetQuestStep(67555) == 255">
							<LisbethTravel ZoneId="155" XYZ="205.9204, 307.8507, 412.2529" />
							<TurnIn QuestId="67555" NpcId="2006367" XYZ="205.9204, 307.8507, 412.2529" />
						</If>
					</If>
				</If>
			</If>

			<!-- Sharlayan Ascending -->

			<If Condition="not IsQuestCompleted(67556) and IsQuestCompleted(65964)">
				<If Condition="Core.Player.ClassLevel &gt; 49">
					<If Condition="not HasQuest(67556)">
						<LisbethTravel ZoneId="155" XYZ="204.6082, 307.8711, 414.6334" />
						<If Condition="IsQuestAcceptQualified(67556)">
							<PickupQuest NpcId="1015127" QuestId="67556" XYZ="204.6082, 307.8711, 414.6334" />
						</If>
					</If>
					<If Condition="HasQuest(67556)">
						<While Condition="GetQuestStep(67556) == 1">
							<LisbethTravel ZoneId="155" XYZ="200.9766, 293.33, 420.3707" />
							<TalkTo NpcId="1006377" XYZ="200.9766, 293.33, 420.3707" QuestId="67556" StepId="1" />
							<TalkTo NpcId="1006376" XYZ="195.3612, 234.7984, 419.3026" QuestId="67556" StepId="1" />
						</While>
						<If Condition="GetQuestStep(67556) == 2">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TalkTo NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" QuestId="67556" StepId="2" />
						</If>
						<If Condition="GetQuestStep(67556) == 3">
							<LisbethTravel ZoneId="419" XYZ="116.472, -4.734893, -52.56738" />
							<TalkTo NpcId="1015128" XYZ="116.472, -4.734893, -52.56738" QuestId="67556" StepId="3" />
						</If>
						<If Condition="GetQuestStep(67556) == 4">
							<LisbethTravel ZoneId="419" XYZ="51.74329, 11.74142, 27.11523" />
							<TalkTo NpcId="1015130" XYZ="51.74329, 11.74142, 27.11523" QuestId="67556" StepId="4" />
						</If>
						<If Condition="GetQuestStep(67556) == 5">
							<LisbethTravel ZoneId="419" XYZ="-0.07635498, 11.9651, 44.32739" />
							<TalkTo NpcId="1015129" XYZ="-0.07635498, 11.9651, 44.32739" QuestId="67556" StepId="5" />
						</If>
						<If Condition="GetQuestStep(67556) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67556" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- Empty Nest -->

			<If Condition="not IsQuestCompleted(67557)">
				<If Condition="Core.Player.ClassLevel &gt; 51">
					<If Condition="not HasQuest(67557)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67557)">
							 <PickupQuest NpcId="1012222" QuestId="67557" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67557)">
						<If Condition="GetQuestStep(67557) == 1">
							<LisbethTravel ZoneId="397" XYZ="446.9824, 217.9514, 753.994" />
							<TalkTo NpcId="1015142" XYZ="446.9824, 217.9514, 753.994" QuestId="67557" StepId="1" />
						</If>
						<If Condition="GetQuestStep(67557) == 2">
							<LisbethTravel ZoneId="397" XYZ="487.1747, 200.2377, 656.2751" />
							<TalkTo NpcId="1015145" XYZ="487.1747, 200.2377, 656.2751" QuestId="67557" StepId="2" />
						</If>
						<If Condition="GetQuestStep(67557) == 3">
							<LisbethTravel ZoneId="397" XYZ="487.1747, 200.2377, 656.2751" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015146" XYZ="487.1747, 200.2377, 656.2751" QuestId="67557" StepId="3" />
						</If>
						<If Condition="GetQuestStep(67557) == 4">
							<LisbethTravel ZoneId="397" XYZ="500.1144, 161.6116, -320.0275" />
							<Grind grindRef="Empty_Nest" while="HasQuest(67557) and GetQuestStep(67557) == 4" />
						</If>
						<If Condition="GetQuestStep(67557) == 5">
							<LisbethTravel ZoneId="397" XYZ="500.1144, 161.6116, -320.0275" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015147" XYZ="500.1144, 161.6116, -320.0275" QuestId="67557" StepId="5" />
						</If>
						<If Condition="GetQuestStep(67557) == 6">
							<LisbethTravel ZoneId="397" XYZ="446.9824, 217.9514, 753.994" />
							<TalkTo NpcId="1015142" XYZ="446.9824, 217.9514, 753.994" QuestId="67557" StepId="6" />
						</If>
						<If Condition="GetQuestStep(67557) == 7">
							<LisbethTravel ZoneId="397" XYZ="533.5927, 228.3378, 720.2715" />
							<TalkTo NpcId="1015149" XYZ="533.5927, 228.3378, 720.2715" QuestId="67557" StepId="7" />
						</If>
						<If Condition="GetQuestStep(67557) == 8">
							<LisbethTravel ZoneId="397" XYZ="541.2526, 228.8513, 742.5497" />
							<TalkTo NpcId="1015151" XYZ="541.2526, 228.8513, 742.5497" QuestId="67557" StepId="8" />
						</If>
						<If Condition="GetQuestStep(67557) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67557" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- Conviction -->

			<If Condition="not IsQuestCompleted(67558)">
				<If Condition="Core.Player.ClassLevel &gt; 53">
					<If Condition="not HasQuest(67558)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67558)">
							 <PickupQuest NpcId="1012222" QuestId="67558" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67558)">
						<If Condition="GetQuestStep(67558) == 1">
							<LisbethTravel ZoneId="397" XYZ="-266.0106, 126.4074, -0.04577637" />
							<TalkTo NpcId="1015168" XYZ="-266.0106, 126.4074, -0.04577637" QuestId="67558" StepId="1" />
						</If>
						<While Condition="GetQuestStep(67558) == 2">
							<LisbethTravel ZoneId="397" XYZ="-311.4214, 126.836, 3.494263" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015169" XYZ="-311.4214, 126.836, 3.494263" UseTimes="1" QuestId="67558" StepId="2" />
							<MoveTo Name="Wounded Convictor" XYZ="-296.8643, 125.8753, -14.38934" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015170" XYZ="-296.8643, 125.8753, -14.38934" UseTimes="1" QuestId="67558" StepId="2" />
							<MoveTo Name="Wounded Convictor" XYZ="-320.0275, 126.5204, -14.02307" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015171" XYZ="-320.0275, 126.5204, -14.02307" UseTimes="1" QuestId="67558" StepId="2" />
						</While>
						<If Condition="GetQuestStep(67558) == 3">
							<LisbethTravel ZoneId="397" XYZ="-310.0786, 125.0202, -25.19269" />
							<TalkTo NpcId="1015163" XYZ="-310.0786, 125.0202, -25.19269" QuestId="67558" StepId="3" />
						</If>
						<If Condition="GetQuestStep(67558) == 4">
							<LisbethTravel ZoneId="397" XYZ="-310.0786, 125.0202, -25.19269" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015178" XYZ="-310.0786, 125.0202, -25.19269" QuestId="67558" StepId="4" />
							<WaitWhile Condition="GetQuestStep(67558) == 4" />
						</If>
						<If Condition="GetQuestStep(67558) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67558" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- Feather in the Cap -->

			<If Condition="not IsQuestCompleted(67559)">
				<If Condition="Core.Player.ClassLevel &gt; 55">
					<If Condition="not HasQuest(67559)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67559)">
							 <PickupQuest NpcId="1012222" QuestId="67559" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67559)">
						<If Condition="GetQuestStep(67559) == 1">
							<LisbethTravel ZoneId="398" XYZ="487.0831, -51.1414, 33.34094" />
							<TalkTo NpcId="1015084" XYZ="487.0831, -51.1414, 33.34094" QuestId="67559" StepId="1" />
						</If>
						<While Condition="GetQuestStep(67559) == 2">
							<LisbethTravel ZoneId="398" XYZ="560.9979, -51.27571, 62.974" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015092" XYZ="560.9979, -51.27571, 62.974" UseTimes="1" QuestId="67559" StepId="2" />
							<NoCombatMoveTo Name="Injured Hunter" XYZ="472.0377, -51.14139, 8.590759" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015094" XYZ="472.0377, -51.14139, 8.590759" UseTimes="1" QuestId="67559" StepId="2" />
							<NoCombatMoveTo Name="Injured Hunter" XYZ="465.568, -51.19559, 98.10022" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015093" XYZ="465.568, -51.19559, 98.10022" UseTimes="1" QuestId="67559" StepId="2" />
							<WaitWhile Condition="GetQuestStep(67559) == 2" />
						</While>
						<If Condition="GetQuestStep(67559) == 3">
							<LisbethTravel ZoneId="398" XYZ="509.7581, -51.32657, 75.91357" />
							<TalkTo NpcId="1015087" XYZ="509.7581, -51.32657, 75.91357" QuestId="67559" StepId="3" />
						</If>
						<If Condition="GetQuestStep(67559) == 4">
							<LisbethTravel ZoneId="398" XYZ="731.5632, -40.98759, -27.4204" />
							<SimpleDuty InteractNpcId="1015095" XYZ="731.5632, -40.98759, -27.42047" QuestId="67559" StepId="4">
								<HotSpots>
									<HotSpot XYZ="771.3892, -40.98376, -47.07416" Radius="90" />
								</HotSpots>
								<TargetMobs>
									<TargetMob Id="4255" Weight="3000" /> <!-- Gruntamulous Dindergrabble -->
									<TargetMob Id="4253" Weight="2000" /> <!-- Old World Mercenary -->
									<TargetMob Id="3858" Weight="1000" /> <!-- Celie the Pursuant -->
								</TargetMobs>
							</SimpleDuty>
						</If>
						<If Condition="GetQuestStep(67559) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67559" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

			<!-- Trumped -->

			<If Condition="not IsQuestCompleted(67560)">
				<If Condition="Core.Player.ClassLevel &gt; 57">
					<If Condition="not HasQuest(67560)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67560)">
							 <PickupQuest NpcId="1012222" QuestId="67560" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67560)">
						<If Condition="GetQuestStep(67560) == 1">
							<LisbethTravel ZoneId="397" XYZ="707.9423, 204.3249, -252.491" />
							<TalkTo NpcId="1015181" XYZ="707.9423, 204.3249, -252.491" QuestId="67560" StepId="1" />
						</If>
						<If Condition="GetQuestStep(67560) == 2">
							<LisbethTravel ZoneId="397" XYZ="679.1942, 207.2133, -273.8232" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015190" XYZ="679.1942, 207.2133, -273.8232" QuestId="67560" StepId="2" />
						</If>
						<If Condition="GetQuestStep(67560) == 3">
							<LisbethTravel ZoneId="397" XYZ="651.7891, 207.9226, -268.2994" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015191" XYZ="651.7891, 207.9226, -268.2994" QuestId="67560" StepId="3" />
						</If>
						<If Condition="GetQuestStep(67560) == 4">
							<LisbethTravel ZoneId="397" XYZ="652.8267, 209.0998, -282.7039" />
							<LLUseSpell Distance="29" SpellId="3595" NpcId="1015192" XYZ="652.8267, 209.0998, -282.7039" QuestId="67560" StepId="4" />
						</If>
						<If Condition="GetQuestStep(67560) == 5">
							<LisbethTravel ZoneId="397" XYZ="614.313, 210.8644, -301.2894" />
							<UseObject NpcId="2006415" XYZ="614.313, 210.8644, -301.2894" Radius="5" QuestId="67560" StepId="5" />
						</If>
						<If Condition="GetQuestStep(67560) == 6">
							<LisbethTravel ZoneId="397" XYZ="614.2518, 210.6775, -300.1908" />
							<TalkTo NpcId="1015197" XYZ="614.2518, 210.6775, -300.1908" QuestId="67560" StepId="6" />
						</If>
						<If Condition="GetQuestStep(67560) == 7">
							<LisbethTravel ZoneId="397" XYZ="707.9423, 204.3249, -252.491" />
							<TalkTo NpcId="1015181" XYZ="707.9423, 204.3249, -252.491" QuestId="67560" StepId="7" />
						</If>
						<If Condition="GetQuestStep(67560) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67560" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If> 
			</If>

			<!-- The Hands of Fate -->

			<If Condition="not IsQuestCompleted(67561)">
				<If Condition="Core.Player.ClassLevel &gt; 59">
					<If Condition="not HasQuest(67561)">
						<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
						<If Condition="IsQuestAcceptQualified(67561)">
							 <PickupQuest NpcId="1012222" QuestId="67561" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
					<If Condition="HasQuest(67561)">
						<If Condition="GetQuestStep(67561) == 1">
							<LisbethTravel ZoneId="399" XYZ="-359.4263, 141.554, -215.3201" />
							<TalkTo NpcId="1015108" XYZ="-359.4263, 141.554, -215.3201" QuestId="67561" StepId="1" />
						</If>
						<If Condition="GetQuestStep(67561) == 2">
							<LisbethTravel ZoneId="399" XYZ="-447.6539, 159.354, 147.631" />
							<TalkTo NpcId="1015111" XYZ="-447.6539, 159.354, 147.631" QuestId="67561" StepId="2" />
						</If>
						<If Condition="GetQuestStep(67561) == 3">
							<LisbethTravel ZoneId="399" XYZ="-370.4738, 147.3435, 59.12866" />
							<SimpleDuty InteractNpcId="1015114" XYZ="-370.4738, 147.3435, 59.12866" QuestId="67561" StepId="3">
								<HotSpots>
									<HotSpot XYZ="-380.7584, 147.3457, 60.28833" Radius="90" />
								</HotSpots>
								<TargetMobs>
									<TargetMob Id="3877" Weight="10000" /> <!-- Wind Arcanum -->
									<TargetMob Id="3876" Weight="9000" /> <!-- Water Arcanum -->
									<TargetMob Id="3879" Weight="7000" /> <!-- Lightning Arcanum -->
									<TargetMob Id="3878" Weight="5000" /> <!-- Earth Arcanum -->
									<TargetMob Id="3880" Weight="8000" /> <!-- Ice Arcanum -->
									<TargetMob Id="3875" Weight="6000" /> <!-- Fire Arcanum -->
									<TargetMob Id="3874" Weight="4000" /> <!-- Bibliothec Reciter -->
									<TargetMob Id="3873" Weight="3000" /> <!-- Bibliothec Cataloger -->
									<TargetMob Id="3872" Weight="2000" /> <!-- Bibliothec Binder -->
									<TargetMob Id="3871" Weight="1000" /> <!-- Sevestre -->
								</TargetMobs>
							</SimpleDuty>
						</If>
						<If Condition="GetQuestStep(67561) == 4">
							<LisbethTravel ZoneId="399" XYZ="-370.4738, 147.3435, 59.12866" />
							<TalkTo NpcId="1015114" XYZ="-370.4738, 147.3435, 59.12866" QuestId="67561" StepId="4" />
						</If>
						<If Condition="GetQuestStep(67561) == 255">
							<LisbethTravel Area="Ishgard (The Pillars)" Position="199.7968, -5.399966, -59.39272"/>
							<TurnIn QuestId="67561" NpcId="1012222" XYZ="202.3804, -5.399966, -58.9151" />
						</If>
					</If>
				</If>
			</If>

    <!-- East Meets West (Level 60) -->
    <If Condition="IsQuestCompleted(67561) and not HasQuest(67945) and not IsQuestCompleted(67945) and Core.Player.ClassLevel &gt; 59">
      <LisbethTravel ZoneId="419" XYZ="199.9673, -5.399966, -59.53096"/>
      <If Condition="IsQuestAcceptQualified(67945)">
        <PickupQuest QuestId="67945" NpcId="1012222" XYZ="199.9673, -5.399966, -59.53096"/>
      </If>
    </If>
    <If Condition="HasQuest(67945) and not IsQuestCompleted(67945) and GetQuestStep(67945) == 1">
      <LisbethTravel ZoneId="155" XYZ="191.2372, 234.4424, 400.8269"/>
      <TalkTo NpcId="1021184" XYZ="191.2372, 234.4424, 400.8269" QuestId="67945" StepId="1"/>
    </If>
    <If Condition="HasQuest(67945) and not IsQuestCompleted(67945) and GetQuestStep(67945) == 2">
      <LisbethTravel ZoneId="153" XYZ="-3.139796, 0.5876223, 360.2487"/>
      <LLTalkTo NpcId="1021187" XYZ="-3.139796, 0.5876223, 360.2487" QuestId="67945" StepId="2"/>
    </If>
    <If Condition="HasQuest(67945) and not IsQuestCompleted(67945) and GetQuestStep(67945) == 255">
      <LisbethTravel ZoneId="419" XYZ="196.235, -5.399963, -65.42387"/>
      <TurnIn QuestId="67945" NpcId="1021191" XYZ="196.235, -5.399963, -65.42387"/>
    </If>
    <!-- Ride Like the Wind (Level 63) -->
    <If Condition="IsQuestCompleted(67945) and not HasQuest(67946) and not IsQuestCompleted(67946) and Core.Player.ClassLevel &gt; 62">
      <LisbethTravel ZoneId="419" XYZ="196.235, -5.399963, -65.42387"/>
      <If Condition="IsQuestAcceptQualified(67946)">
        <PickupQuest QuestId="67946" NpcId="1021191" XYZ="196.235, -5.399963, -65.42387"/>
      </If>
    </If>
    <If Condition="HasQuest(67946) and not IsQuestCompleted(67946) and GetQuestStep(67946) == 1">
      <If Condition="not IsOnMap(419)">
        <LisbethTravel ZoneId="419" XYZ="181.3305, -5.361074, -55.05441"/>
      </If>
      <TalkTo NpcId="1021221" XYZ="181.3305, -5.361074, -55.05441" QuestId="67946" StepId="1"/>
    </If>
    <If Condition="HasQuest(67946) and not IsQuestCompleted(67946) and GetQuestStep(67946) == 2">
      <LisbethTravel ZoneId="155" XYZ="242.3853, 362.0131, -615.1931"/>
      <TalkTo NpcId="1021222" XYZ="242.3853, 362.0131, -615.1931" QuestId="67946" StepId="2"/>
    </If>
    <If Condition="HasQuest(67946) and not IsQuestCompleted(67946) and GetQuestStep(67946) == 3">
      <LisbethTravel ZoneId="419" XYZ="195.8436, -5.399962, -66.26345"/>
      <TalkTo NpcId="1021191" XYZ="195.8436, -5.399962, -66.26345" QuestId="67946" StepId="3"/>
    </If>
    <If Condition="HasQuest(67946) and not IsQuestCompleted(67946) and GetQuestStep(67946) == 255">
      <If Condition="not IsOnMap(419)">
        <LisbethTravel ZoneId="419" XYZ="199.6998, -5.399966, -59.2089"/>
      </If>
      <TurnIn QuestId="67946" NpcId="1012222" XYZ="199.6998, -5.399966, -59.2089"/>
    </If>
    <!-- Come Rain or Shrine (Level 65) -->
    <If Condition="IsQuestCompleted(67946) and not HasQuest(67947) and not IsQuestCompleted(67947) and Core.Player.ClassLevel &gt; 64">
      <LisbethTravel ZoneId="419" XYZ="199.6998, -5.399966, -59.2089"/>
      <If Condition="IsQuestAcceptQualified(67947)">
        <PickupQuest QuestId="67947" NpcId="1012222" XYZ="199.6998, -5.399966, -59.2089"/>
      </If>
    </If>
    <If Condition="HasQuest(67947) and not IsQuestCompleted(67947) and GetQuestStep(67947) == 1">
      <LisbethTravel ZoneId="419" XYZ="-0.7601707, 11.9651, 44.23048"/>
      <TalkTo NpcId="1021255" XYZ="-0.7601707, 11.9651, 44.23048" QuestId="67947" StepId="1"/>
    </If>
    <If Condition="HasQuest(67947) and not IsQuestCompleted(67947) and GetQuestStep(67947) == 2 and GetQuestById(67947).GetTodoArgs(2, 0).Item1 == 0">
      <LisbethTravel ZoneId="628" XYZ="-16.18696, 0.09999585, -32.66051"/>
      <TalkTo NpcId="1021259" XYZ="-16.18696, 0.09999585, -32.66051" QuestId="67947"/>
    </If>
    <If Condition="HasQuest(67947) and not IsQuestCompleted(67947) and GetQuestStep(67947) == 2 and GetQuestById(67947).GetTodoArgs(2, 0).Item1 == 1">
      <If Condition="not IsOnMap(628)">
        <LisbethTravel ZoneId="628" XYZ="-11.75645, -4.994225, 16.25891"/>
      </If>
      <TalkTo NpcId="1021260" XYZ="-11.75645, -4.994225, 16.25891" QuestId="67947"/>
    </If>
    <If Condition="HasQuest(67947) and not IsQuestCompleted(67947) and GetQuestStep(67947) == 2 and GetQuestById(67947).GetTodoArgs(2, 0).Item1 == 2">
      <If Condition="not IsOnMap(628)">
        <LisbethTravel ZoneId="628" XYZ="28.9684, 4, 54.22083"/>
      </If>
      <TalkTo NpcId="1021256" XYZ="28.9684, 4, 54.22083" QuestId="67947"/>
    </If>
    <If Condition="HasQuest(67947) and not IsQuestCompleted(67947) and GetQuestStep(67947) == 3">
      <If Condition="not IsOnMap(628)">
        <LisbethTravel ZoneId="628" XYZ="-50.91378, 16.89316, 0.260496"/>
      </If>
      <UseObject NpcId="2007937" XYZ="-50.91378, 16.89316, 0.260496" QuestId="67947" StepId="3"/>
    </If>
    <If Condition="HasQuest(67947) and not IsQuestCompleted(67947) and GetQuestStep(67947) == 4">
      <If Condition="not IsOnMap(628)">
        <LisbethTravel ZoneId="628" XYZ="-58.82175, -3, 25.09331"/>
      </If>
      <RunCode Name="Announce_Manual_Completion"/>
    </If>
    <If Condition="HasQuest(67947) and not IsQuestCompleted(67947) and GetQuestStep(67947) == 255">
      <LisbethTravel ZoneId="628" XYZ="96.09327, 4.000001, 87.85081"/>
      <TurnIn QuestId="67947" NpcId="1021262" XYZ="96.09327, 4.000001, 87.85081"/>
    </If>
    <!-- Behind Door Number Two (Levl 68) -->
    <If Condition="IsQuestCompleted(67947) and not HasQuest(67948) and not IsQuestCompleted(67948) and Core.Player.ClassLevel &gt; 67">
      <LisbethTravel ZoneId="628" XYZ="96.09327, 4.000001, 87.85081"/>
      <If Condition="IsQuestAcceptQualified(67948)">
        <PickupQuest QuestId="67948" NpcId="1021262" XYZ="96.09327, 4.000001, 87.85081"/>
      </If>
    </If>
    <If Condition="HasQuest(67948) and not IsQuestCompleted(67948) and GetQuestStep(67948) == 1">
      <LisbethTravel ZoneId="614" XYZ="468.8399, 69.52995, -68.90013"/>
      <TalkTo NpcId="1021273" XYZ="468.8399, 69.52995, -68.90013" QuestId="67948" StepId="1"/>
    </If>
    <If Condition="HasQuest(67948) and not IsQuestCompleted(67948) and GetQuestStep(67948) == 2">
      <LisbethTravel ZoneId="614" XYZ="-410.9906, 53.45012, 308.3187"/>
      <LLTalkTo NpcId="1021274" XYZ="-410.9906, 53.45012, 308.3187" QuestId="67948" StepId="2"/>
      <WaitWhile Condition="HasQuest(67948) and not IsQuestCompleted(67948) and not GetQuestStep(67948) == 3"/>
    </If>
    <If Condition="HasQuest(67948) and not IsQuestCompleted(67948) and GetQuestStep(67948) == 3">
      <If Condition="not IsOnMap(614)">
        <LisbethTravel ZoneId="614" XYZ="-410.3134, 53.34185, 309.0562"/>
      </If>
      <TalkTo NpcId="1021274" XYZ="-413.7789, 55.09362, 305.8365" QuestId="67948" StepId="3"/>
    </If>
    <If Condition="HasQuest(67948) and not IsQuestCompleted(67948) and GetQuestStep(67948) == 4">
      <LisbethTravel ZoneId="628" XYZ="-35.20874, 14, -56.15696"/>
      <TalkTo NpcId="1021054" XYZ="-35.20874, 14, -56.15696" QuestId="67948" StepId="4"/>
    </If>
    <If Condition="HasQuest(67948) and not IsQuestCompleted(67948) and GetQuestStep(67948) == 255">
      <LisbethTravel ZoneId="628" XYZ="96.90276, 4.000001, 86.48091"/>
      <TurnIn QuestId="67948" NpcId="1021262" XYZ="96.90276, 4.000001, 86.48091"/>
    </If>
    <!-- Foxfire (Level 70) -->
    <If Condition="IsQuestCompleted(67948) and not HasQuest(67949) and not IsQuestCompleted(67949) and Core.Player.ClassLevel &gt; 69">
      <LisbethTravel ZoneId="628" XYZ="96.90276, 4.000001, 86.48091"/>
      <If Condition="IsQuestAcceptQualified(67949)">
        <PickupQuest QuestId="67949" NpcId="1021262" XYZ="96.90276, 4.000001, 86.48091"/>
      </If>
    </If>
    <If Condition="HasQuest(67949) and not IsQuestCompleted(67949) and GetQuestStep(67949) == 1">
      <LisbethTravel ZoneId="628" XYZ="44.69529, 8.02, 178.1052"/>
      <UseObject NpcId="2008103" XYZ="44.69529, 8.02, 178.1052" QuestId="67949" StepId="1"/>
    </If>
    <If Condition="HasQuest(67949) and not IsQuestCompleted(67949) and GetQuestStep(67949) == 2">
      <LisbethTravel ZoneId="628" XYZ="-60.53006, -3, 28.43481"/>
      <TalkTo NpcId="1021305" XYZ="-60.53006, -3, 28.43481" QuestId="67949" StepId="2"/>
    </If>
    <If Condition="HasQuest(67949) and not IsQuestCompleted(67949) and GetQuestStep(67949) == 3">
      <LisbethTravel ZoneId="628" XYZ="130.3816, 25, -0.5099589"/>
      <RunCode Name="Announce_Manual_Completion"/>
    </If>
    <If Condition="HasQuest(67949) and not IsQuestCompleted(67949) and GetQuestStep(67949) == 255">
      <LisbethTravel ZoneId="628" XYZ="-47.85839, 16.52945, 11.30724"/>
      <TurnIn QuestId="67949" NpcId="1021309" XYZ="-47.85839, 16.52945, 11.30724"/>
    </If>

  
  </Order>
  <GrindAreas>
  </GrindAreas>
  <CodeChunks>
    <CodeChunk Name="DutyCommence">
      <![CDATA[
        Logging.Write("Commencing duty.");
        uint[] npcIds = { 2006316 };
        var dutyNpc = GameObjectManager.GameObjects.Where(r => r.IsTargetable && npcIds.Contains(r.NpcId)).OrderBy(r => r.Distance()).FirstOrDefault();
        while (Core.Me.Location.Distance2D(dutyNpc.Location) > 1.5f)
        {
          await Coroutine.Yield();
          Navigator.PlayerMover.MoveTowards(dutyNpc.Location);
        }
        Navigator.PlayerMover.MoveStop();
        dutyNpc.Interact();
        await Coroutine.Wait(5000, () => Talk.DialogOpen || DifficultySelectYesNo.IsOpen || SelectYesno.IsOpen);
        while (!(DifficultySelectYesNo.IsOpen || SelectYesno.IsOpen))
        {
          Talk.Next();
          await Coroutine.Yield();
        }
        await Coroutine.Wait(5000, () => DifficultySelectYesNo.IsOpen || SelectYesno.IsOpen);
        if (DifficultySelectYesNo.IsOpen) { DifficultySelectYesNo.Proceed(2); }
        else if (SelectYesno.IsOpen) { SelectYesno.Yes(); }
        else
        {
         Logging.Write("Duty window didn't open.");
         TreeRoot.Stop();
        }
        await Coroutine.Wait(2000, () => CommonBehaviors.IsLoading);
        await Coroutine.Wait(-1, () => !CommonBehaviors.IsLoading);
        while (QuestLogManager.InCutscene)
        {
          ff14bot.RemoteAgents.AgentCutScene.Instance.PromptSkip();
          if (ff14bot.RemoteAgents.AgentCutScene.Instance.CanSkip && SelectString.IsOpen) { SelectString.ClickSlot(0); }
          if (Talk.DialogOpen) { Talk.Next(); }
          await Coroutine.Yield();
        }
        await Coroutine.Wait(2000, () => CommonBehaviors.IsLoading);
        await Coroutine.Wait(-1, () => !CommonBehaviors.IsLoading);
        await Coroutine.Wait(10000, () => !Core.Me.HasAura(1268));
        Logging.Write("Duty commenced.");
        await Coroutine.Sleep(1500);
      ]]>
    </CodeChunk>  
  </CodeChunks>
</Profile>  
